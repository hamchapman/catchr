%h2
  Edit #{resource_name.to_s.humanize}
= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f|
  = devise_error_messages!
  %div.form-field
    = f.email_field :email, autofocus: true, placeholder: 'Email'
  - if devise_mapping.confirmable? && resource.pending_reconfirmation?
    %div
      Currently waiting confirmation for: #{resource.unconfirmed_email}
  %div.form-field
    = f.text_field :username, placeholder: 'Username'
  %div.form-field
    = f.text_field :name, placeholder: 'Name'
  %div.form-field
    = f.password_field :password, autocomplete: 'off', placeholder: 'New Password'
    %br/
    %i (leave blank if you don't want to change it)
  %div.form-field
    = f.password_field :password_confirmation, placeholder: 'New Password Confirmation'
  - if f.object.encrypted_password.present?
    %div.form-field
      = f.password_field :current_password, placeholder: 'Current Password'
      %br/
      %i (we need your current password to confirm your changes)
  %div.form-select
    = f.time_zone_select :time_zone, nil, default: 'London'
  %div
    = f.label 'Daily summary email?'
    = f.check_box :daily_email
  %div
    = f.label 'Make your information publicly accessible?'
    = f.check_box :public
    %br/
    %i (You can choose to make individual accounts and services private if you want)
  %div.form-button
    = f.submit 'Update', class: 'btn'
%h3 Cancel my account
%p.form-button
  Unhappy? #{button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn'}
